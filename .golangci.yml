run:
  timeout: 5m
  tests: true
  modules-download-mode: readonly

output:
  format: colored-line-number
  print-issued-lines: true
  print-linter-name: true

linters:
  enable:
    - asciicheck      # Check for non-ASCII characters
    - bodyclose       # Check HTTP response body is closed
    - errcheck        # Check for unchecked errors
    - copyloopvar     # Check for pointers to enclosing loop variables (replaces exportloopref)
    - goconst         # Find repeated strings that could be constants
    - gocyclo         # Compute cyclomatic complexities
    - gofmt           # Check if code is gofmt-ed
    - goimports       # Check if imports are sorted
    - gomodguard      # Allow and block list linter for direct Go module dependencies
    - goprintffuncname # Check that printf-like functions are named with f at the end
    - gosec           # Inspect source code for security problems
    - gosimple        # Simplify code
    - govet           # Reports suspicious constructs
    - ineffassign     # Detect ineffectual assignments
    - misspell        # Find commonly misspelled English words
    - nakedret        # Find naked returns in functions greater than a specified function length
    - nolintlint      # Report ill-formed or insufficient nolint directives
    - revive          # Fast, configurable, extensible, flexible, and beautiful linter for Go
    - staticcheck     # It's a set of rules from staticcheck
    - typecheck       # Like the front-end of a Go compiler, parses and type-checks Go code
    - unconvert       # Remove unnecessary type conversions
    - unparam         # Report unused function parameters
    - unused          # Check for unused constants, variables, functions and types (replaces deadcode, structcheck, varcheck)
    - whitespace      # Detection of leading and trailing whitespace

  disable:
    - exhaustive      # Too strict for our use case
    - funlen          # Function length is context dependent
    - gochecknoglobals # We may need globals in some cases
    - gochecknoinits  # Init functions may be necessary
    - godot           # Comment style is flexible for now
    - gomnd           # Magic numbers acceptable in tests
    - lll             # Line length handled by gofmt

linters-settings:
  gocyclo:
    min-complexity: 15
  
  goconst:
    min-len: 3
    min-occurrences: 3
  
  misspell:
    locale: US
  
  nakedret:
    max-func-lines: 30
  
  revive:
    rules:
      - name: exported
      - name: var-naming
      - name: package-comments
      - name: function-result-limit
        arguments: [3]
  
  gosec:
    excludes:
      - G104 # Audit errors not checked - we'll handle this contextually
  
  lll:
    line-length: 120

issues:
  exclude-rules:
    # Allow long lines in test files for readability
    - path: _test\.go
      linters:
        - lll
    
    # Allow magic numbers in test files
    - path: _test\.go
      linters:
        - gomnd
    
    # Exclude known false positives
    - text: "weak cryptographic primitive"
      linters:
        - gosec
    
    # Don't report issues in vendor directories
    - path: vendor/
      linters:
        - all
    
    # Don't report issues in demo code (used for linter testing)
    # - path: tests/demo-code/
    #   linters:
    #     - all

  max-issues-per-linter: 50
  max-same-issues: 10